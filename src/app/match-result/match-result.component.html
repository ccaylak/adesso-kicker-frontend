<form [formGroup]="matchRequestForm" (ngSubmit)="submitMatch()">
  <div class="container shadow" id="form">
    <!--/* Info Tooltip */-->
    <fa-icon class="info-tooltip" [icon]="faInfoCircle" tooltip="Du kannst 1v1, 1v2, 2v1 oder 2v2 spielen"
             placement="left" size="2x"></fa-icon>

    <!--/* Which players played? */-->
    <div class="headline">Wer hat gespielt?</div>

    <!--/* Missing Player Error */-->
    <div *ngIf="playerB1.invalid  && playerB1.touched" class="popup popup-error">
      <fa-icon [icon]="faTimes" aria-hidden="true"></fa-icon>
      <span *ngIf="playerB1.errors?.required"> Bitte w채hle einen Gegner aus</span>
      <span *ngIf="playerB1.errors?.invalidUserId && playerB1.dirty"> Der User ({{playerB1.value}}
        ) existiert nicht</span>
    </div>

    <!--/* Same Player Error */-->
    <div *ngIf="teamGroup.errors?.samePlayer" class="popup popup-error">
      <fa-icon [icon]="faTimes" aria-hidden="true"></fa-icon>
      <span> Ein Spieler kann an einem Kicker-Spiel nur einmal teilnehmen</span>
    </div>

    <!--/* Invalid UserId Error */-->
    <div *ngIf="playerB2.touched && playerB2.invalid" class="popup popup-error">
      <fa-icon [icon]="faTimes" aria-hidden="true"></fa-icon>
      <span *ngIf="playerB2.errors?.invalidUserId"> Der User ({{playerB2.value}}) existiert nicht</span>
    </div>

    <div *ngIf="playerA2.touched && playerA2.invalid" class="popup popup-error">
      <fa-icon [icon]="faTimes" aria-hidden="true"></fa-icon>
      <span *ngIf="playerA2.errors?.invalidUserId"> Der User ({{playerA2.value}}) existiert nicht</span>
    </div>

    <div *ngIf="(players$|async) as players" class="row" formGroupName="teamGroup">
      <!--/* Team A */-->
      <div class="col-sm-6">
        <div class="team-description">Team A</div>

        <!--/* PlayerA2 */-->
        <div class="team team-textbox">
          <input class="form-control" formControlName="playerA1" type="text" name="playerA1" id="playerA1"/>
          <input list=playersOfTeamA formControlName="playerA2" class="form-control" type="text" id="playerA2"
                 name="playerA2">
          <datalist id="playersOfTeamA">
            <option
              *ngFor="let playerA2 of players"
              [value]="playerA2.userId">{{playerA2.firstName}} {{playerA2.lastName}}</option>
          </datalist>
        </div>
      </div>

      <!--/* Team B */-->
      <div class="col-sm-6">
        <div class="team-description">Team B</div>
        <div class="team team-textbox search-bar">

          <!--/* PlayerB1 */-->
          <ng-container>
            <input list="playersOfTeamB1"
                   formControlName="playerB1" class="form-control" type="text" id="playerB1"
                   name="playerB1"
                   [class.is-invalid]="playerB1.invalid && playerB1.touched"/>
            <datalist id="playersOfTeamB1">
              <option
                *ngFor="let playerB1 of players"
                [value]="playerB1.userId">{{playerB1.firstName}} {{playerB1.lastName}}</option>
            </datalist>
          </ng-container>

          <!--/* PlayerB2 */-->
          <ng-container>
            <input list="playersOfTeamB2" formControlName="playerB2" class="form-control" type="text" id="playerB2"
                   name="playerB2"/>
            <datalist id="playersOfTeamB2">
              <option
                *ngFor="let playerB2 of players"
                [value]="playerB2.userId">{{playerB2.firstName}} {{playerB2.lastName}}</option>
            </datalist>
          </ng-container>
        </div>
      </div>
    </div>

    <div formGroupName="matchGroup" class="container">

      <!--/* Which Team won? */-->
      <div class="headline">Wer hat gewonnen?</div>
      <!--/* Radio Buttons */-->
      <div class="row" id="radio-winner-team">
        <div class="col">
          <div class="form-check" id="form-check-1">
            <input type="radio" formControlName="winnerTeam" value="teamA" name="winnerTeam" id="radio1">
            <label class="form-check-label" for="radio1">Team A</label>
          </div>
        </div>
        <div class="col">
          <div class="form-check" id="form-check-2">
            <input type="radio" formControlName="winnerTeam" value="teamB" name="winnerTeam" id="radio2">
            <label class="form-check-label" for="radio2">Team B</label>
          </div>
        </div>
      </div>
      <!--/* When did you play? */-->
      <div class="headline">Wann habt ihr gespielt?</div>
      <!--/* Datepicker */-->
      <div class="form-group col-sm-6" id="datetimepicker-form-group">
        <div class="input-group date">
          <input type="text" id="datetimepicker" #dp="bsDatepicker" formControlName="date" class="form-control"
                 bsDatepicker
                 [bsConfig]="{isAnimated: true, containerClass: 'theme-dark-blue'}" [maxDate]="bsValueAndMaxDate"
                 placement="top"
                 [class.is-invalid]="date.invalid && date.touched">
          <div class="input-group-append">
            <div class="input-group-text" (click)="dp.toggle()">
              <fa-icon [icon]="faCalender"></fa-icon>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="date.invalid && date.touched" class="popup popup-error">
      <i class="fa fa-times" aria-hidden="true"></i>
      <!--/* Error No Date */-->
      <span *ngIf="date.errors.required">Bitte w채hle ein g체ltiges Datum</span>
      <!--/* Error Date in Future */-->
      <span *ngIf="date.errors.bsDate">Bitte w채hle ein Datum, dass nicht in der Zukunft liegt</span>
    </div>
    <!--/* Submit Match */-->
    <button [disabled]="matchRequestForm.invalid" type="submit" class="btn btn-primary">Match erstellen</button>
  </div>
</form>
